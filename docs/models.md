# Models

These are preliminary models thought out to migrate from Firebase RTDB to Firestore.

## CSI User

This is the model for the CSI User.

- key: string - The user's Firebase Auth UID.
- unisonId: string - The user's UniSon ID.
- csiId: number - The user's CSI ID.
- email: string - The user's email entered for Firebase Auth.
- name: string - The user's name.
- passcode: string - The user's encrypted passcode.
- role: reference - A reference to the user's [role](#roles).
- isAllowedAccess: bool - Whether the user is allowed to access or not.
- createdAt: timestamp - The user's creation date.
- dateOfBirth: timestamp - The user's birthday.

## Roles

These are the possible roles a CSI User can have.

- CSI_PROVISIONAL: can only access, but has to be explicitly set by a CSI_ADMIN or CSI_ROOT user.
- CSI_MEMBER: can only access and check logs.
- CSI_ADMIN: can also manage members' access permission.
- CSI_ROOT: can also assign roles and manage everyone else's access permission.

### Each role has the following fields

- name: string - The role's readable name.
- canReadLogs: bool - Whether the user can read logs.
- canAccess: bool - Whether the user has access.
- canSetRoles: bool - Whether the user can set other users' roles.
- canAllowAndRevokeAccess: bool - Whether the user can grant or revoke other users' permission to access.

## Logs

Logs is a collection of all the logs.

- key: string - The log's autogenerated key.
- user: reference - A reference to the user.
- accessed: bool - Whether the attempt was successful.
- bluetooth: bool - Whether the attempt was via CSI PRO Access.
- timestamp: number | timestamp - The log's timestamp.
- attemptData: AttemptData - The unknown attempt data. Only present when the CSI ID is unknown.
- room: reference - A reference to the entered room.

## Attempt Data

Attempt Data is an object that holds the CSI ID and Passcode entered. Only present when the CSI ID is unknown.

- csiId: number - The attempted CSI ID.
- passcode: string - The attempted Passcode.

## Rooms

This is the model for a room in which CSI PRO Access is implemented.

- key: string - The auto-generated key.
- name: string - The room's convenience name.
- building: string - The building where the room is located.
- room: string - The room's indentifier (101, 201, 301).
- (experimental) logs - a collection of access logs for this specific room.
- (experimental) users - a collection of users with access to this specific room.
